(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{16:function(e,t,n){e.exports=n(25)},21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),i=n.n(a),c=(n(21),n(3)),u=n(1),l=n(8),s=n(4),f=n(2);function d(){var e=Object(u.a)(["\n  padding: 5px 10px;\n  cursor: pointer;\n  font-size: 14px;\n  &:hover {\n    background: #e4e4e4;\n  }\n"]);return d=function(){return e},e}function p(){var e=Object(u.a)(["\n  width: 100%;\n  max-height: 200px;\n  overflow-y: auto;\n  position: absolute;\n  top: 100%;\n  background: #ffffff;\n  margin-top: 5px;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.1);\n"]);return p=function(){return e},e}function b(){var e=Object(u.a)(["\n  position: absolute;\n  font-weight: bold;\n  left: 10px;\n  top: 50%;\n  transform: translate(0, -50%);\n  z-index: 1;\n"]);return b=function(){return e},e}function g(){var e=Object(u.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border: none;\n  box-shadow: none;\n  outline: none;\n  padding: 0 20px 0 180px;\n  font-size: 16px;\n  position: relative;\n  z-index: 2;\n  background: transparent;\n"]);return g=function(){return e},e}function h(){var e=Object(u.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #D6D6D6;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.1);\n  background: #ffffff;\n  border-radius: 4px;\n  overflow: hidden;\n"]);return h=function(){return e},e}function x(){var e=Object(u.a)(["\n  width: 80%;\n  height: 64px;\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  z-index: 2;\n"]);return x=function(){return e},e}var m=f.a.div(x()),y=f.a.div(h()),v=f.a.input(g()),j=f.a.span(b()),O=f.a.div(p()),_=f.a.div(d()),w="https://geocode-maps.yandex.ru/1.x/?apikey=".concat("fd1cea5d-2179-4ca3-948a-55b839aa8c79","&format=json&geocode="),k=function(e){var t=e.selectAddress,n=e.pointAddress,a=e.cdi,i=Object(o.useState)([]),u=Object(c.a)(i,2),l=u[0],s=u[1],f=Object(o.useState)(""),d=Object(c.a)(f,2),p=d[0],b=d[1],g=function(e){var t=(e||p).split(" ").join("+"),n="".concat(w).concat(t);fetch(n).then((function(e){return e.json()})).then((function(e){if(e){console.log("RES >>>>>>",e);var t=e.response.GeoObjectCollection.featureMember.map((function(e){return{address:e.GeoObject.metaDataProperty.GeocoderMetaData.text,coords:e.GeoObject.Point.pos}}));1===t.length?h(t[0]):s(t)}})).catch((function(e){console.log("ERROR >>>>>>",e)}))},h=function(e){t(e),b(e.address),s([])};return Object(o.useEffect)((function(){n&&b(n)}),[n]),Object(o.useEffect)((function(){a&&(b(a),g(a))}),[a]),r.a.createElement(m,null,r.a.createElement(y,null,r.a.createElement(v,{type:"text",value:p,onChange:function(e){b(e.target.value)},onKeyDown:function(e){13===e.keyCode&&g()}}),r.a.createElement(j,null,"\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f:")),l&&l.length?r.a.createElement(O,null,l.map((function(e){return r.a.createElement(_,{key:e.address,onClick:function(){return h(e)}},e.address)}))):"")};function E(){var e=Object(u.a)(["\n  font-size: 14px;\n  z-index: 2;\n  position: absolute;\n  left: 20px;\n  bottom: 20px;\n  cursor: pointer;\n  width: 200px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #D6D6D6;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.1);\n  border-radius: 3px;\n  background: #ffffff;\n  &:hover {\n    background: #f7f7f7;\n  }\n"]);return E=function(){return e},e}function S(){var e=Object(u.a)(["\n  overflow: hidden;\n  border-radius: 3px;\n  box-shadow: 0px 1px 10px rgba(0,0,0,0.3);\n  position: relative;\n"]);return S=function(){return e},e}var C=f.a.div(S()),D=f.a.div(E()),z=function(e){var t=e.cdi,n=e.showToast,a="",i="",u=Object(o.useState)([]),f=Object(c.a)(u,2),d=f[0],p=f[1],b=Object(o.useState)([]),g=Object(c.a)(b,2),h=g[0],x=g[1],m=Object(o.useState)(!1),y=Object(c.a)(m,2),v=y[0],j=y[1],O=Object(o.useState)(""),_=Object(c.a)(O,2),w=_[0],E=_[1],S=Object(o.useState)(null),z=Object(c.a)(S,2),R=z[0],A=z[1],T=Object(o.useState)(null),B=Object(c.a)(T,2),G=B[0],I=B[1],M=function(e){var t="https://geocode-maps.yandex.ru/1.x/?apikey=".concat("fd1cea5d-2179-4ca3-948a-55b839aa8c79","&format=json&geocode=").concat(e,"&kind=house&results=1");fetch(t).then((function(e){return e.json()})).then((function(e){if(e){var t=e.response.GeoObjectCollection.featureMember[0].GeoObject.metaDataProperty.GeocoderMetaData.text;E(t)}})).catch((function(e){console.log("ERROR >>>>>>",e)}))};Object(o.useEffect)((function(){G&&R&&G.geolocation.get({mapStateAutoApply:!0}).then((function(e){if(e){var t=e.geoObjects.position;R.setCenter(t,16),p(t),M(Object(l.a)(t).reverse().join("+"))}}))}),[G,R]);return r.a.createElement(s.f,{query:{apikey:"fd1cea5d-2179-4ca3-948a-55b839aa8c79"}},r.a.createElement(C,null,d&&d.length?r.a.createElement(D,{onClick:function(){j(!v),v&&x([])}},h&&h.length?"\u0421\u043a\u0440\u044b\u0442\u044c \u043e\u0431\u043b\u0430\u0441\u0442\u044c":"\u0423\u0442\u043e\u0447\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u044a\u0435\u0437\u0434"):"",r.a.createElement(k,{cdi:t,selectAddress:function(e){var t=e.address,n=e.coords.split(" ").reverse();p(n),E(t),x([]),R.setCenter(n,17)},pointAddress:w}),r.a.createElement(s.c,{modules:["geolocation","geocode","coordSystem.geo"],onLoad:I,onClick:function(e){n()},width:"100%",height:"500px",defaultState:{center:[55.75,37.57],zoom:12},options:{suppressMapOpenBlock:!0},instanceRef:A},r.a.createElement(s.g,null),r.a.createElement(s.b,null),d&&d.length?r.a.createElement(s.d,{modules:["geoObject.addon.balloon","geoObject.addon.hint"],onDragend:function(){var e=i.geometry.getCoordinates();p(e),M(Object(l.a)(e).reverse().join("+"))},geometry:d,options:{draggable:!v},properties:{hintContent:w,balloonContent:'<div style="width: 200px;">'+w+"</div>"},instanceRef:function(e){return i=e}}):"",d&&d.length&&v?r.a.createElement(s.a,{geometry:[d,100],onClick:function(e){var t=e.get("coords");x(t)},options:{draggable:!1,fillColor:"#FFD2D2",fillOpacity:.4,strokeColor:"#FFD2D2",strokeOpacity:.7,strokeWidth:1,zIndex:2}}):"",h&&h.length?r.a.createElement(s.d,{modules:["geoObject.addon.balloon","geoObject.addon.hint"],geometry:h,onDragend:function(){var e=a.geometry.getCoordinates(),t=G.coordSystem.geo.getDistance(e,d);x(t>100?[]:e)},options:{draggable:!0,preset:"islands#dotIcon",iconColor:"#ef2c2c"},properties:{hintContent:"\u041f\u043e\u0434\u044a\u0435\u0437\u0434",balloonContent:"\u041f\u043e\u0434\u044a\u0435\u0437\u0434 - \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},instanceRef:function(e){return a=e}}):"",r.a.createElement(s.e,{geometry:[[[55.73,37.54],[55.77,37.54],[55.77,37.67],[55.73,37.66]],[[59.93727133539923,30.31255582405088],[59.94011379470408,30.312341247329694],[59.9406521117351,30.319036041030863],[59.93724980068361,30.31950810981749]],[[59.835406433316464,30.491914146711682],[59.83938078758292,30.47989785032497],[59.845946069213966,30.483245247175553],[59.84663707591772,30.49749314146265],[59.840158322960896,30.509166115095464]]],options:{fillColor:"#23629a",opacity:.3,zIndex:1},onClick:function(e){if(!v){var t=e.get("coords");p(t),M(Object(l.a)(t).reverse().join("+"))}}}))))};var R={cashlessOnly:"0",city:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityID:200601,code:"7800000000000000000000000",country_code:643,fullName:"\u0433. \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",inPrice:"1",isAutoCity:"1",isTerminal:"1",label:"\u0433. \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",nameString:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 \u0433",noSendDoor:"0",regionString:"\u0433. \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",street:"1",uString:"",value:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},A=function(e,t){return{getQuery:function(){var n=e&&e.length?e.filter((function(e){return(e.settlement_kladr_id||e.city_kladr_id)===R.code})):[],o=[],r=[];if(e.length&&n.length)e.forEach((function(e){var n=[e.region_with_type?e.region_with_type:"",e.area_with_type?e.area_with_type:"",e.city_with_type?e.city_with_type:"",e.settlement_with_type?e.settlement_with_type:"",t].filter(Boolean).join(" ");o.push(n)}));else if(e.length&&!n.lengt){var a=[R&&R.regionString?R.regionString:"",R&&R.uString?R.uString.split(",")[0]:"",R&&R.nameString?R.nameString:"",t].filter(Boolean).join(" ");o.push(a),e.forEach((function(e){var n=[e.region_with_type?e.region_with_type:"",e.area_with_type?e.area_with_type:"",e.city_with_type?e.city_with_type:"",e.settlement_with_type?e.settlement_with_type:"",t].filter(Boolean).join(" ");o.push(n)}))}else if(!e.length){var i=[R&&R.regionString?R.regionString:"",R&&R.uString?R.uString.split(",")[0]:"",R&&R.fullName?R.fullName:"",t].filter(Boolean).join(" ");o.push(i)}return o.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r},getCityStr:function(e){return[e.region_with_type?e.region_with_type:"",e.area_with_type?", "+e.area_with_type:"",e.city_with_type?", "+e.city_with_type:"",e.settlement_with_type?", "+e.settlement_with_type:"",e.street_with_type?", "+e.street_with_type:"",e.house?", "+e.house_type+" "+e.house:"",e.block?" "+e.block_type+" "+e.block:"",e.flat?", "+e.flat_type+" "+e.flat:""].filter(Boolean).join("")}}};function T(){var e=Object(u.a)(["\n  padding: 5px;\n  font-size: 14px;\n  cursor: pointer;\n  &:hover {\n    background: #f7f7f7;\n  }\n"]);return T=function(){return e},e}function B(){var e=Object(u.a)(["\n  overflow-y: auto;\n  max-height: 200px;\n  top: 100%;\n  left: 5px;\n  right: 5px;\n  background: #ffffff;\n  position: absolute;\n  z-index: 3;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.1);\n  margin-top: 10px;\n  border-radius: 2px;\n"]);return B=function(){return e},e}function G(){var e=Object(u.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  border: 1px solid #D6D6D6;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.1);\n  border-radius: 4px;\n  outline: none;\n  padding: 10px 20px;\n  font-size: 16px;\n  background: transparent;\n"]);return G=function(){return e},e}function I(){var e=Object(u.a)(["\n  cursor: pointer;\n  width: 90px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: #23629a;\n  color: #ffffff;\n  border-radius: 4px;\n  &:hover {\n    background: #2a73b5;\n  }\n"]);return I=function(){return e},e}function M(){var e=Object(u.a)(["\n  position: relative;\n  margin-bottom: 40px;\n  padding-right: 100px;\n"]);return M=function(){return e},e}var P=f.a.div(M()),q=f.a.div(I()),F=f.a.input(G()),N=f.a.div(B()),J=f.a.div(T()),K=function(e){var t=e.set,n=Object(o.useState)(""),a=Object(c.a)(n,2),i=a[0],u=a[1],l=Object(o.useState)(""),s=Object(c.a)(l,2),f=s[0],d=s[1],p=Object(o.useState)(""),b=Object(c.a)(p,2),g=b[0],h=b[1],x=A(f,i),m=x.getQuery,y=x.getCityStr,v=function(e,t){var n=Object(o.useRef)(null);return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];clearTimeout(n.current),n.current=setTimeout((function(){return e.apply(void 0,r)}),t)}}((function(){var e={restrict_value:!0,count:20,query:i,locations_boost:[{kladr_id:"78"}],locations:[{kladr_id:"78"},{kladr_id:"78"},{kladr_id:"47"}],data:m()};fetch("https://www.dellin.stage/api/v1/address/search",{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.map((function(e){return e.value||(e.value=y(e)),e}));h(t);var n={},o=e.data.filter((function(t){var o="clean"!==e.type||("0"===t.qc||"1"===t.qc);return!(n[t.kladr_id]||!o)&&(n[t.kladr_id]=!0,!0)}));o.length&&"suggest"===e.type&&d(o)})).catch((function(e){console.log("ERROR >>>>>>",e)}))}),300);return Object(o.useEffect)((function(){i||d("")}),[i]),r.a.createElement(P,null,r.a.createElement(q,{onClick:function(){t(i)}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"),r.a.createElement(F,{type:"text",onChange:function(e){u(e.target.value)},value:i,onKeyUp:function(){v()}}),g&&r.a.createElement(N,null,g.map((function(e){return r.a.createElement(J,{onClick:function(){return u(e.value),void h("")},key:e.kladr_id},e.value)}))))};function Q(){var e=Object(u.a)(["\n  width: 300px;\n  padding: 10px 20px;\n  color: #ffffff;\n  border-radius: 4px;\n  box-shadow: 0px 1px 10px rgba(0,0,0,0.3);\n  position: fixed;\n  right: 30px;\n  bottom: 30px;\n  background: #e04439;\n  z-index: 100;\n  font-size: 14px;\n\n  animation: fadeIn 0.3s ease;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      right: -100px;\n    }\n    to {\n      opacity: 1;\n      right: 30px;\n    }\n  }\n"]);return Q=function(){return e},e}function L(){var e=Object(u.a)(["\n  width: 800px;\n  margin: 0 auto;\n  padding: 40px 10px 100px 10px;\n"]);return L=function(){return e},e}var U=f.a.div(L()),W=f.a.div(Q());var H=function(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(""),u=Object(c.a)(i,2),l=u[0],s=u[1],f=Object(o.useRef)(null);return Object(o.useEffect)((function(){return clearTimeout(f.current),f.current=setTimeout((function(){s(!1)}),2e3),function(){clearTimeout(f.current)}}),[l]),r.a.createElement(U,null,l&&r.a.createElement(W,null,"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0432 \u044d\u0442\u0443 \u0442\u043e\u0447\u043a\u0443. \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438."),r.a.createElement(K,{set:a}),r.a.createElement(z,{cdi:n,width:"100%",showToast:function(){s(!0)}}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ab05f4c9.chunk.js.map